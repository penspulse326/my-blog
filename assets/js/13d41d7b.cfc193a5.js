"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5727],{8865:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>l});var t=r(4848),s=r(8453);const i={title:"\u524d\u7aef HTTPS \u5c0d\u63a5\u5f8c\u7aef HTTP",description:"HTTPS \u5c0d\u63a5 HTTP\u6642\u7684 mixed content \u554f\u984c",date:new Date("2024-05-23T18:45:53.000Z"),keywords:["https-to-http","mix-content","devops","vercel","vite","\u524d\u7aef","\u90e8\u7f72"],slug:"github-upload-repo"},c=void 0,o={id:"devops/2024-05-23-https-to-http",title:"\u524d\u7aef HTTPS \u5c0d\u63a5\u5f8c\u7aef HTTP",description:"HTTPS \u5c0d\u63a5 HTTP\u6642\u7684 mixed content \u554f\u984c",source:"@site/docs/devops/2024-05-23-https-to-http.md",sourceDirName:"devops",slug:"/devops/github-upload-repo",permalink:"/devops/github-upload-repo",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"\u524d\u7aef HTTPS \u5c0d\u63a5\u5f8c\u7aef HTTP",description:"HTTPS \u5c0d\u63a5 HTTP\u6642\u7684 mixed content \u554f\u984c",date:"2024-05-23T18:45:53.000Z",keywords:["https-to-http","mix-content","devops","vercel","vite","\u524d\u7aef","\u90e8\u7f72"],slug:"github-upload-repo"},sidebar:"tutorialSidebar",previous:{title:"DevOps",permalink:"/category/devops"},next:{title:"Github",permalink:"/category/github"}},d={},l=[{value:"Vercel \u90e8\u7f72\u8a2d\u5b9a",id:"vercel-\u90e8\u7f72\u8a2d\u5b9a",level:2},{value:"\u672c\u5730\u7aef\u8a2d\u5b9a",id:"\u672c\u5730\u7aef\u8a2d\u5b9a",level:2},{value:"\u53c3\u8003\u8cc7\u6599",id:"\u53c3\u8003\u8cc7\u6599",level:2}];function p(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",del:"del",h2:"h2",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["\u60c5\u5883\uff1a",(0,t.jsx)(n.br,{}),"\n","\u524d\u7aef\u662f ",(0,t.jsx)(n.code,{children:"React"})," + ",(0,t.jsx)(n.code,{children:"Vite"}),(0,t.jsx)(n.br,{}),"\n","\u5f8c\u7aef\u662f\u904b\u884c\u5728\u67d0\u500b ",(0,t.jsx)(n.code,{children:"HTTP"})," \u5354\u5b9a\u7684 ",(0,t.jsx)(n.code,{children:"ASP.NET"})," \u7a0b\u5f0f",(0,t.jsx)(n.br,{}),"\n","\u6b64\u914d\u7f6e\u6703\u5728\u700f\u89bd\u5668\u770b\u5230 Mixed-Content \u7684\u5831\u932f"]}),"\n",(0,t.jsx)(n.h2,{id:"vercel-\u90e8\u7f72\u8a2d\u5b9a",children:"Vercel \u90e8\u7f72\u8a2d\u5b9a"}),"\n",(0,t.jsxs)(n.p,{children:["\u5047\u8a2d\u524d\u7aef\u662f\u900f\u904e Vercel \u90e8\u7f72\uff0c\u53ef\u4ee5\u5728\u5c08\u6848\u6839\u76ee\u9304\u65b0\u589e ",(0,t.jsx)(n.code,{children:"vercel.json"}),"\uff1a"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\xa0 \r\n  "rewrites": [\r\n\xa0 \xa0 {\r\n\xa0 \xa0 \xa0 "source": "/api/:path*",\r\n\xa0 \xa0 \xa0 "destination": "http://your.backend.server/api/:path*"\r\n\xa0 \xa0 }\r\n\xa0 ]\r\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["source \u662f\u6514\u622a\u6307\u5b9a\u8def\u5f91\uff0cdestination \u662f\u81ea\u52d5\u6539\u5beb\u5f8c\u7684\u8def\u5f91\uff0c",(0,t.jsx)(n.br,{}),"\n","\u4f8b\u5982\uff1a\u5c0d ",(0,t.jsx)(n.code,{children:"/api/member/signup"})," \u767c\u51fa\u8acb\u6c42\uff0c",(0,t.jsx)(n.br,{}),"\n","\u7d93\u904e\u81ea\u52d5\u6539\u5beb\u5f8c\u6703\u5c0d ",(0,t.jsx)(n.code,{children:"http://your.backend.server/api/member/signup"})," \u8acb\u6c42\u3002"]}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsxs)(n.p,{children:["\u6ce8\u610f\u4e0a\u9762\u7684\u52d5\u614b\u8def\u7531\u662f\u5beb ",(0,t.jsx)(n.code,{children:"/:path*"})," \u800c\u4e0d\u662f ",(0,t.jsx)(n.code,{children:"/:path"}),"\uff0c",(0,t.jsx)(n.br,{}),"\n","\u6c92\u6709\u661f\u865f * \u7684\u8a71\u53ea\u6703\u6355\u6349\u9019\u4e32\u8def\u5f91 ",(0,t.jsx)(n.code,{children:"/api/member/signup"})," \u7684\u7b2c\u4e00\u500b\u5340\u9593 ",(0,t.jsx)(n.code,{children:"/member"}),"\uff0c",(0,t.jsx)(n.br,{}),"\n","\u5f8c\u9762\u7684 ",(0,t.jsx)(n.code,{children:"/signup"})," \u5c31\u4e0d\u6703\u88ab\u6355\u6349\u5230\uff01"]})}),"\n",(0,t.jsx)(n.p,{children:"\u7db2\u8def\u8acb\u6c42\u7684 URL \u4e5f\u8981\u4fee\u6539\uff0c\u5c07\u5f8c\u7aef\u7684 domain \u79fb\u9664\uff0c\u7559\u4e0b\u5f8c\u9762\u7684\u8def\u5f91\u5373\u53ef\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"// \u539f\u672c\u7684\r\nfetch('http://your.backend.server/api/member/signup', config);\r\n\r\n// \u4fee\u6539\u5f8c\r\nfetch('/api/member/signup', config);\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u4e0a\u9762\u4fee\u6539\u5f8c\u7684 fetch \u51fd\u5f0f\u57f7\u884c\u6642\u5c31\u6703\u88ab Vercel \u6514\u622a\uff0c\u81ea\u52d5\u6539\u5beb\u5b8c\u624d\u5411\u5f8c\u7aef\u767c\u51fa\uff0c",(0,t.jsx)(n.br,{}),"\n","\u4e0d\u662f\u7528 Vercel \u4f86\u90e8\u7f72\u7684\u8a71\uff0c\u4e00\u822c PaaS \u4f9b\u61c9\u5546\u4e5f\u6709\u63d0\u4f9b\u985e\u4f3c\u7684\u8a2d\u5b9a\uff0c",(0,t.jsx)(n.br,{}),"\n","\u53bb\u53c3\u8003\u4ed6\u5011\u63d0\u4f9b\u7684\u6587\u4ef6\u5373\u53ef\u3002\uff08",(0,t.jsx)(n.del,{children:"\u5c31\u662f\u4e0d\u8981\u554f\u6211 Vercel \u4ee5\u5916\u7684\u6771\u897f\u7684\u610f\u601d"}),"\uff09"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"\u672c\u5730\u7aef\u8a2d\u5b9a",children:"\u672c\u5730\u7aef\u8a2d\u5b9a"}),"\n",(0,t.jsxs)(n.p,{children:["\u4e00\u8def\u6539\u5230\u9019\u88e1\u6703\u6709\u500b\u554f\u984c\uff1a",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"\u6211\u90a3\u4e9b fetch \u7684 url \u5168\u6539\u4e86\uff0c\u90a3\u6211\u5728\u672c\u5730\u7aef\u958b\u767c\u7684\u6642\u5019\u600e\u9ebc\u8fa6\uff1f"})]}),"\n",(0,t.jsxs)(n.p,{children:["\u672c\u5730\u7aef\u958b\u767c\u6642\u7576\u7136\u4e0d\u6703\u88ab Vercel \u7684\u8a2d\u5b9a\u6514\u622a\u5230\uff0c",(0,t.jsx)(n.br,{}),"\n","\u9019\u500b\u8acb\u6c42 ",(0,t.jsx)(n.code,{children:"fetch('/api/member/signup', config)"})," \u6703\u76f4\u63a5\u5c0d\u672c\u5730\u7aef\u767c\u51fa\uff0c",(0,t.jsx)(n.br,{}),"\n","\u7136\u5f8c\u5c31\u5831\u932f\u4e86\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:["\u5728 ",(0,t.jsx)(n.code,{children:"vite.config.js"})," \u52a0\u5165 server \u8a2d\u5b9a\uff1a"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'import { defineConfig } from "vite";\r\nimport react from "@vitejs/plugin-react";\r\n\r\nexport default defineConfig({\r\n\xa0 plugins: [react()],\r\n  // \u52a0\u5165\u4ee5\u4e0b\u8a2d\u5b9a\r\n\xa0 server: {\r\n\xa0 \xa0 proxy: {\r\n\xa0 \xa0 \xa0 "/api": {\r\n\xa0 \xa0 \xa0 \xa0 target: "http://your.backend.server",\r\n\xa0 \xa0 \xa0 \xa0 changeOrigin: true,\r\n        // \u5982\u679c\u6709\u5b57\u4e32\u9700\u8981\u66ff\u63db\u53ef\u4ee5\u52a0\u5165 rewrite \u9019\u500b\u5c6c\u6027\r\n        // rewrite: (path) => path.replace(/^\\/api/, \'\')\r\n\xa0 \xa0 \xa0 },\r\n\xa0 \xa0 },\r\n\xa0 },\r\n});\n'})}),"\n",(0,t.jsxs)(n.p,{children:["\u672c\u5730\u7aef\u5728\u958b\u767c\u6642\u5c31\u6703\u5957\u7528\u9019\u500b proxy \u4ee3\u7406\u8a2d\u5b9a\uff0c",(0,t.jsx)(n.br,{}),"\n","\u6514\u622a\u5230 ",(0,t.jsx)(n.code,{children:"/api"})," \u958b\u982d\u7684\u8acb\u6c42\u5f8c\u6703\u628a\u9019\u4e32\u8acb\u6c42\u7684\u8def\u5f91\u52a0\u5165\u5230 target \u7684\u7db2\u5740\u5f8c\u9762\uff0c",(0,t.jsx)(n.br,{}),"\n","\u8ddf\u525b\u525b ",(0,t.jsx)(n.code,{children:"vercel.json"})," \u505a\u7684\u4e8b\u60c5\u662f\u4e00\u6a23\u7684\uff01"]}),"\n",(0,t.jsxs)(n.p,{children:["Vercel \u90e8\u7f72\u6642\u662f\u628a\u6211\u5011\u7684\u5c08\u6848 build\uff08\u6253\u5305\uff09\u5f8c\u518d\u904b\u884c\uff0c",(0,t.jsx)(n.br,{}),"\n","\u800c Vite \u5728\u6253\u5305\u6642\u4e0d\u6703\u628a\u525b\u525b\u5728 ",(0,t.jsx)(n.code,{children:"vite.config.js"})," \u52a0\u5165\u7684 server \u8a2d\u5b9a\u4e5f\u7de8\u8b6f\u9032\u53bb\uff0c",(0,t.jsx)(n.br,{}),"\n","\u6240\u4ee5\u4e0d\u7528\u64d4\u5fc3\u9019\u500b\u4ee3\u7406\u8a2d\u5b9a\u6703\u8986\u84cb\u5230 ",(0,t.jsx)(n.code,{children:"vercel.json"})," \u7684\u8a2d\u5b9a\uff01"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"\u53c3\u8003\u8cc7\u6599",children:"\u53c3\u8003\u8cc7\u6599"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://developer.mozilla.org/zh-TW/docs/Web/Security/Mixed_content",children:"\u6df7\u5408\u5167\u5bb9"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://vercel.com/docs/projects/project-configuration#rewrites",children:"Configuring Projects with vercel.json"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://medium.com/@JammsL/%E5%BE%9E%E5%81%9A%E4%B8%AD%E5%AD%B8-vercel%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86-%E8%A7%A3%E6%B1%BAgithub-pages%E8%88%87%E5%BE%8C%E7%AB%AFhttp%E9%99%90%E5%88%B6-2a04498e6d36",children:"Vercel\u53cd\u5411\u4ee3\u7406\uff1a\u89e3\u6c7aGitHub Pages\u8207\u5f8c\u7aefHTTP\u9650\u5236"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>o});var t=r(6540);const s={},i=t.createContext(s);function c(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);