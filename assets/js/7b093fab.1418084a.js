"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[407],{3510:(n,r,e)=>{e.r(r),e.d(r,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>s,metadata:()=>c,toc:()=>a});var t=e(4848),o=e(8453);const s={title:"Button",description:"\u8a2d\u8a08 Button \u5143\u4ef6",date:new Date("2024-07-26T00:00:00.000Z"),keywords:["\u7a0b\u5f0f\u8a9e\u8a00","JavaScript","React","custom-component","component-design","storybook","button"],slug:"react-custom-ui-button"},i=void 0,c={id:"react/react_ui/Button",title:"Button",description:"\u8a2d\u8a08 Button \u5143\u4ef6",source:"@site/docs/react/react_ui/1.Button.md",sourceDirName:"react/react_ui",slug:"/react/react_ui/react-custom-ui-button",permalink:"/react/react_ui/react-custom-ui-button",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Button",description:"\u8a2d\u8a08 Button \u5143\u4ef6",date:"2024-07-26T00:00:00.000Z",keywords:["\u7a0b\u5f0f\u8a9e\u8a00","JavaScript","React","custom-component","component-design","storybook","button"],slug:"react-custom-ui-button"},sidebar:"tutorialSidebar",previous:{title:"\u4e8b\u524d\u6e96\u5099",permalink:"/react/react_ui/react-custom-ui-prepare"},next:{title:"Switch",permalink:"/react/react_ui/react-custom-ui-switch"}},l={},a=[{value:"\u5c6c\u6027\u8a2d\u8a08",id:"\u5c6c\u6027\u8a2d\u8a08",level:2},{value:"\u57fa\u672c\u6a23\u5f0f",id:"\u57fa\u672c\u6a23\u5f0f",level:2},{value:"\u6a23\u5f0f\u8b8a\u5316",id:"\u6a23\u5f0f\u8b8a\u5316",level:2},{value:"\u81ea\u8a02\u984f\u8272",id:"\u81ea\u8a02\u984f\u8272",level:2}];function d(n){const r={admonition:"admonition",br:"br",code:"code",h2:"h2",hr:"hr",img:"img",p:"p",pre:"pre",...(0,o.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.h2,{id:"\u5c6c\u6027\u8a2d\u8a08",children:"\u5c6c\u6027\u8a2d\u8a08"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-ts",children:"interface ButtonProps {\r\n  /**\r\n   * \u6309\u9215\u6587\u5b57\r\n   */\r\n  children?: React.ReactNode;\r\n\r\n  /**\r\n   * \u6309\u9215\u6a23\u5f0f\r\n   */\r\n  variant: 'contained' | 'outlined' | 'text';\r\n\r\n  /**\r\n   * \u6309\u9215\u984f\u8272\r\n   * \u53ef\u4ee5\u662f\u8272\u78bc\u6216\u662f\u4e3b\u984c\u8272\u95dc\u9375\u5b57\r\n   */\r\n  themeColor: string;\r\n\r\n  /**\r\n   * \u662f\u5426\u7981\u7528\r\n   */\r\n  isDisabled?: boolean;\r\n\r\n  /**\r\n   * \u662f\u5426\u8b80\u53d6\u4e2d\r\n   */\r\n  isLoading?: boolean;\r\n\r\n  /**\r\n   * \u6309\u9215\u5de6\u5074\u5716\u793a\r\n   */\r\n  startIcon?: React.ReactNode;\r\n  /**\r\n   * \u6309\u9215\u53f3\u5074\u5716\u793a\r\n   */\r\n  endIcon?: React.ReactNode;\r\n\r\n  /**\r\n   * inline style\r\n   */\r\n  style?: React.CSSProperties;\r\n\r\n  /**\r\n   * className\r\n   */\r\n  className?: string;\r\n\r\n  /**\r\n   * \u9ede\u64ca\u4e8b\u4ef6\r\n   */\r\n  onClick?: () => void;\r\n}\n"})}),"\n",(0,t.jsxs)(r.admonition,{type:"info",children:[(0,t.jsx)(r.p,{children:"\u4f7f\u7528 jsDoc \u7684\u8a3b\u89e3\u683c\u5f0f\uff0c\u53ef\u4ee5\u8b93 storybook \u7684 Docs \u76f4\u63a5\u8b80\u53d6\u8b8a\u6210 Description\uff1a"}),(0,t.jsx)(r.p,{children:(0,t.jsx)(r.img,{src:"https://raw.githubusercontent.com/penspulse326/penspulse326.github.io/images/2023/17219844390002e1mvo.png",alt:"gh"})})]}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"\u57fa\u672c\u6a23\u5f0f",children:"\u57fa\u672c\u6a23\u5f0f"}),"\n",(0,t.jsx)(r.p,{children:"\u4f7f\u7528 styled \u505a\u51fa\u57fa\u672c\u7684\u6a23\u5f0f\uff1a"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-tsx",children:"export const StyledButton = styled.button`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 4px;\r\n\r\n  padding: 4px 8px;\r\n  height: 2em;\r\n\r\n  border: none;\r\n  border-radius: 4px;\r\n  outline: none;\r\n  box-sizing: border-box;\r\n\r\n  background: white;\r\n\r\n  cursor: pointer;\r\n\r\n  transition: 0.3s;\r\n\r\n  &:hover {\r\n    opacity: 0.9;\r\n  }\r\n\r\n  &:active {\r\n    opacity: 0.7;\r\n  }\r\n`;\n"})}),"\n",(0,t.jsxs)(r.p,{children:["\u63a5\u8457\u5c31\u53ef\u4ee5\u5728\u5916\u5c64\u5f15\u5165\u9019\u500b\u6709\u57fa\u672c\u6a23\u5f0f\u7684\u6309\u9215 ",(0,t.jsx)(r.code,{children:"StyledButton"})," \u4e86\uff0c",(0,t.jsx)(r.br,{}),"\n","\u6211\u7684\u7fd2\u6163\u662f\u7528\u5927\u5beb\u540d\u7a31\u7684\u8cc7\u6599\u593e + ",(0,t.jsx)(r.code,{children:"index.tsx"})," \u4f86\u5305\u88dd\u5143\u4ef6\uff0c",(0,t.jsx)(r.br,{}),"\n","\u9019\u6a23\u505a\u7684\u597d\u8655\u662f\u53ef\u4ee5\u5c07 ",(0,t.jsx)(r.code,{children:"styled.ts"}),"\u3001",(0,t.jsx)(r.code,{children:"types.ts"}),"\u3001\u6587\u672c\u7b49\u7b49\u90fd\u7e2e\u9650\u5728\u8cc7\u6599\u593e\u505a\u7ba1\u7406\uff1a"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-tsx",children:"function Button({\r\n  children,\r\n  variant,\r\n  themeColor = 'primary',\r\n  isDisabled = false,\r\n  isLoading = false,\r\n  startIcon,\r\n  endIcon,\r\n  onClick,\r\n  ...props\r\n}: ButtonProps) {\r\n\r\n  return (\r\n    <StyledButton\r\n      type=\"button\"\r\n    >\r\n      <span>{children}</span>\r\n    </StyledButton>\r\n  );\r\n}\n"})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"\u6a23\u5f0f\u8b8a\u5316",children:"\u6a23\u5f0f\u8b8a\u5316"}),"\n",(0,t.jsxs)(r.p,{children:["\u63a5\u4e0b\u4f86\u5c31\u53ef\u4ee5\u5f15\u7528\u5c6c\u6027\u548c\u6cdb\u578b\u4f86\u505a\u6a23\u5f0f\u7684\u8b8a\u5316\u4e86\uff0c",(0,t.jsx)(r.br,{}),"\n","\u6309\u9215\u7684\u98a8\u683c\u9810\u8a08\u6703\u6709 ",(0,t.jsx)(r.code,{children:"contained"}),"\u3001",(0,t.jsx)(r.code,{children:"outlined"}),"\u3001",(0,t.jsx)(r.code,{children:"text"})," \u4e09\u7a2e\uff0c",(0,t.jsx)(r.br,{}),"\n","\u6240\u4ee5\u500b\u5225\u8a2d\u5b9a\u51fa\u6a23\u5f0f\u5f8c\uff0c\u518d\u5305\u88dd\u6210\u7269\u4ef6 ",(0,t.jsx)(r.code,{children:"variantMap"}),"\uff0c\u7528\u50b3\u5165\u7684 ",(0,t.jsx)(r.code,{children:"$variant"})," \u53bb\u505a\u53bb\u7d22\u5f15\uff0c",(0,t.jsx)(r.br,{}),"\n","\u9054\u5230\u5207\u63db\u6a23\u5f0f\u7684\u6548\u679c\uff0c\u7a0b\u5f0f\u78bc\u4e5f\u6703\u7c21\u6f54\u5f88\u591a\uff0c\u7701\u53bb\u4e00\u5806 if\u3001\u77ed\u8def\u3001\u4e09\u5143\u904b\u7b97\u7684\u5224\u65b7\uff1a"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-ts",children:"const containedStyle = css`\r\n  background: ${({ theme }) => theme.colors.primary};\r\n\r\n  color: white;\r\n`;\r\n\r\nconst outlinedStyle = css`\r\n  border: 1px solid ${({ theme }) => theme.colors.primary};\r\n\r\n  color: ${({ theme }) => theme.colors.primary};\r\n`;\r\n\r\nconst textStyle = css`\r\n  color: ${({ theme }) => theme.colors.primary};\r\n`;\r\n\r\nconst variantMap = {\r\n  contained: containedStyle,\r\n  outlined: outlinedStyle,\r\n  text: textStyle,\r\n};\r\n\r\n/**\r\n * \u9700\u8981\u5229\u7528\u5c6c\u6027\u4f5c\u5224\u65b7\u7684\u8a71\u90fd\u8981\u5f15\u7528\u6cdb\u578b ButtonProps\r\n */\r\nexport const StyledButton = styled.button<ButtonProps>`\r\n  // \u7701\u7565...\r\n\r\n  // \u7528 $variant \u53bb\u7d22\u5f15 variantMap\r\n  ${({ $variant }) => variantMap[$variant]}\r\n`;\n"})}),"\n",(0,t.jsx)(r.p,{children:"\u9019\u6a23\u5927\u81f4\u4e0a\u5df2\u7d93\u80fd\u900f\u904e\u50b3\u5165\u7684\u5c6c\u6027\u5207\u63db\u5927\u90e8\u5206\u7684\u6a23\u5f0f\u4e86\uff01"}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"\u81ea\u8a02\u984f\u8272",children:"\u81ea\u8a02\u984f\u8272"}),"\n",(0,t.jsxs)(r.p,{children:["\u9664\u4e86\u900f\u904e ThemeProvider \u81ea\u8a02\u7684\u984f\u8272\u95dc\u9375\u5b57\u4e4b\u5916\uff0c\u6211\u9084\u5e0c\u671b\u53ef\u4ee5\u8b93\u4f7f\u7528\u8005\u50b3\u5165\u8272\u78bc\uff0c",(0,t.jsx)(r.br,{}),"\n","\u56e0\u6b64\u8981\u8a2d\u8a08\u4e00\u500b custom hook \u4f86\u8655\u7406\u984f\u8272\u7684\u5224\u65b7\uff1a"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-ts",children:"import { useTheme } from 'styled-components';\r\n\r\n/**\r\n * \u6aa2\u67e5\u662f\u5426\u70ba\u8272\u78bc\r\n */\r\nconst checkIsColor = (color: string): boolean => {\r\n  const regex =\r\n    /(?:#|0x)(?:[a-f0-9]{3}|[a-f0-9]{6})\\b|(?:rgb|hsl)a?\\([^\\)]*\\)/gi;\r\n  return regex.test(color);\r\n};\r\n\r\n/**\r\n * useColor \u6703\u56de\u50b3 getColor \u65b9\u6cd5\r\n * getColor \u50b3\u5165\u7684 themeColor \u53ca isDisabled \u72c0\u614b\u56de\u50b3\u8272\u78bc\r\n * \u5224\u65b7\u7684\u512a\u5148\u9806\u5e8f\u70ba\uff1a \u6aa2\u67e5\u662f\u5426\u70ba\u7981\u7528\u72c0\u614b > \u6aa2\u67e5\u662f\u5426\u70ba\u5408\u6cd5\u8272\u78bc > \u6aa2\u67e5\u662f\u5426\u70ba theme.colors \u7684 key\uff08\u4e0d\u662f\u5247\u56de\u50b3 primary\uff09\r\n */\r\nexport const useColor = () => {\r\n  const theme = useTheme();\r\n\r\n  const getColor = (themeColor: string, isDisabled: boolean) => {\r\n    if (isDisabled) {\r\n      return theme.colors.disable;\r\n    }\r\n\r\n    const isLegalColor = checkColor(themeColor);\r\n\r\n    if (isLegalColor) {\r\n      return themeColor;\r\n    }\r\n\r\n    return theme.colors[themeColor] || theme.colors.primary;\r\n  };\r\n\r\n  return { getColor };\r\n};\n"})}),"\n",(0,t.jsxs)(r.p,{children:["\u7136\u5f8c\u5728 Button \u4e2d\u4f7f\u7528 useColor\uff0c\u5224\u65b7\u6700\u7d42\u8981\u50b3\u5165\u4ec0\u9ebc\u984f\u8272\u7d66 ",(0,t.jsx)(r.code,{children:"StyledButton"}),"\uff0c",(0,t.jsx)(r.br,{}),"\n","\u56e0\u70ba ",(0,t.jsx)(r.code,{children:"isLoading"})," \u548c ",(0,t.jsx)(r.code,{children:"isDisabled"})," \u90fd\u8981\u555f\u7528\u540c\u4e00\u7a2e\u6a23\u5f0f\uff0c\u6240\u4ee5\u5c31\u7528 OR \u904b\u7b97\uff0c\r\n\u4e5f\u8981\u8a18\u5f97\u628a ",(0,t.jsx)(r.code,{children:"themeColor"})," \u52a0\u4e0a $\uff1a"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-tsx",children:'const { getColor } = useColor();\r\nconst btnColor = getColor($themeColor, isLoading || isDisabled);\r\n\r\nreturn (\r\n    <StyledButton\r\n      type="button"\r\n      disabled={isDisabled || isLoading}\r\n      $variant={$variant}\r\n      $themeColor={btnColor}\r\n      {...props}\r\n    >\r\n      {isLoading && <LoadingAnimation />}\r\n      {startIcon}\r\n      <span>{children}</span>\r\n      {endIcon}\r\n    </StyledButton>\r\n  );\n'})}),"\n",(0,t.jsxs)(r.p,{children:["\u9019\u6a23\u5c31\u53ef\u4ee5\u5c07 styled \u88e1\u9762\u76ee\u524d\u56fa\u5b9a\u4f7f\u7528\u7684 ",(0,t.jsx)(r.code,{children:"theme.colors.primary"})," \u6539\u70ba ",(0,t.jsx)(r.code,{children:"$themeColor"}),"\uff0c",(0,t.jsx)(r.br,{}),"\n","\u8a18\u5f97\u4e00\u6a23\u8981\u5f15\u7528\u6cdb\u578b\uff1a"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-ts",children:"const containedStyle = css<ButtonProps>`\r\n\xa0 background: ${({ $themeColor }) => $themeColor};\r\n\r\n\xa0 color: white;\r\n`;\n"})}),"\n",(0,t.jsx)(r.admonition,{type:"info",children:(0,t.jsxs)(r.p,{children:["\u5230\u76ee\u524d\u70ba\u6b62\uff0c\u4e0d\u8ad6\u662f\u521d\u671f\u8a2d\u5b9a\u3001custom hook \u7b49\u7b49\u90fd\u8a2d\u5b9a\u5b8c\u7562\uff0c\u4e5f\u8a2d\u8a08\u597d\u7b2c\u4e00\u500b\u5143\u4ef6\u4e86\uff01",(0,t.jsx)(r.br,{}),"\n","\u9019\u4e9b\u8a2d\u5b9a\u90fd\u53ef\u4ee5\u6cbf\u7528\u4e0b\u53bb\uff0c\u4e0d\u904e\u5728\u66f8\u4e2d\u7684\u6559\u5b78\u4e00\u958b\u59cb\u4e26\u4e0d\u6703\u52a0\u9019\u9ebc\u591a\u6771\u897f\u63d0\u5347\u96e3\u5ea6\uff0c",(0,t.jsx)(r.br,{}),"\n","\u6211\u89ba\u5f97\u55ae\u7d14\u7df4\u7fd2\u8a2d\u8a08\u5143\u4ef6\u7684\u8a71\u751a\u81f3\u53ef\u4ee5\u4e0d\u8a2d\u5b9a ThemeProvider \u548c TypeScript\u3002"]})})]})}function u(n={}){const{wrapper:r}={...(0,o.R)(),...n.components};return r?(0,t.jsx)(r,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}},8453:(n,r,e)=>{e.d(r,{R:()=>i,x:()=>c});var t=e(6540);const o={},s=t.createContext(o);function i(n){const r=t.useContext(s);return t.useMemo((function(){return"function"==typeof n?n(r):{...r,...n}}),[r,n])}function c(n){let r;return r=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:i(n.components),t.createElement(s.Provider,{value:r},n.children)}}}]);