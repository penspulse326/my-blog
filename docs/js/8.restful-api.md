---
title: "API 與 RESTful"
description: "API 與 RESTful 的概念"
date: 2023-10-11 10:43:08
keywords: [JavaScript, 程式語言, API, 網路請求, RESTful]
slug: restful-api
---

API 的概念其實並不複雜，雖然背後涉及了很多網路請求的細節，  
但要簡單地說就是資料交換的方式。

假如我們打開了 google 首頁，這時就是在向 google 伺服器請求首頁畫面，  
google **伺服器裡面就有一套自己的邏輯來解析我們發出的請求和要執行的動作**，  
最後再把首頁的畫面丟回給我們。

## API 的用途

網頁當然不是自己寫爽就好了 XDD  
因為服務上線的話會有很多原始資料要整理，這些資料也不可能總是存在 js 檔裡面，  
所以原始資料通常會交給後端的伺服器管理，由前端的瀏覽器發出請求後再送過去。

後端伺服器運行的程式也有百百種，有 C#、PHP、Ruby 等等，  
所以瀏覽器與伺服器溝通的方式也會採用雙方都能解析的方式，  
資料內容通常以 **JSON、純文字檔**等等呈現，最後就看前端~~變魔術~~渲染在畫面上。

---

## RESTful

只要知道這個架構在做什麼，就會讓規劃變得很輕鬆（並沒有）
REST 是一種網路系統的設計風格，主要有六種重要的指標：

1. **客戶端-伺服器端**：意指將前後端的程式系統完全分開，方便兩端的功能開發管理與擴充、維護。
2. **無狀態**：客戶端的請求每次都是獨立的，跟上次的請求無關，每次新請求都會得到包含必要資訊的回應。（比如說按電鈴，按幾次就會響幾次，每次的行為都是獨立的）
3. **快取**：可以保留某些請求行為和資源，在有效期限內客戶端如果再發起一樣的請求，可以直接在中間伺服器給出快取的資料，不用每次都與真正的伺服器請求，節省伺服器負載。
4. **統一介面**：這是等等要說的。
5. **分層系統**：前後端中間通常會再安排代理伺服器，用來處理快取、身份驗證、資安等等的一些業務邏輯，減少直接訪問訪問後端伺服器造成的流量消耗和危險性。
6. **按需代碼（可選）**：根據特定的請求從後端生成程式碼，再發送到前端執行。

我們經常聽到的 RESTful API 就是建立在以上的概念所設計出來的網路請求方法～  
API 最常見的就是規定使用者透過網址（URL）發送過來的請求，  
來對應伺服器要做的事，所以這時候**路由**的設計就很重要，  
也就是上面說的統一介面的問題。

前後端的開發人員會規劃出一套完整的路由系統，讓雙方可以看懂請求的行為是什麼～

比如我們部署了留言板網站的網域 www.our-comments.com 指向我們的伺服器時，  
前端會根據畫面的按鈕、表單、超連結等等的互動行為，  
**把使用者想做的事透過子網域的 URL 發送過來讓後端接收**，  
因此路由可能會這樣設計：

| URL                           | HTTP method | Definition             |
| ----------------------------- | ----------- | ---------------------- |
| /user/:id                     | GET         | 查看某個使用者的資料   |
| /user/:id/comments            | GET         | 查看某個使用者的留言   |
| /user/:id/add                 | POST        | 在某個使用者的頁面留言 |
| /user/:id/comments/:id/update | PUT         | 更新某一則留言         |
| /user/:id/comments/:id/delete | DELETE      | 刪除某一則留言         |

網址列會因為超連結、點擊按鈕等等的行為產生頁面跳轉而改變，
改變的方式就會依照上面設計好的路由去寫，  
出現 www.our-comments.com/user/123456 、www.our-comments.com/user/123456/add 等，  
常見網站大多也會這樣設計，所以網址列經常會看到類似的結構！

---

## 參考資料

- [RESTful API 與 MVC 名詞介紹](https://ithelp.ithome.com.tw/articles/10191925)
- [表現層狀態轉換](https://zh.wikipedia.org/zh-tw/%E8%A1%A8%E7%8E%B0%E5%B1%82%E7%8A%B6%E6%80%81%E8%BD%AC%E6%8D%A2)
- [從拉麵店的販賣機理解什麼是 API](https://hulitw.medium.com/ramen-and-api-6238437dc544)
